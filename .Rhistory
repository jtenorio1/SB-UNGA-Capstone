votedesc <- tbl_df(descriptionsnew)
View(rawvotes)
View(countrycodes)
View(ideals)
View(ideals)
colnames(ideals) = ideals[2,]
View(ideals)
ideals <- tbl_df(Idealpoints)
colnames(ideals) = ideals[1,]
View(ideals)
ideals = ideals[-1,]
View(ideals)
countrycodes <- ideals[,2:3]
View(countrycodes)
countrycodes <- unique(df[c("ccode", "CountryAbb")])
ccodes <- unique(df[c("ccode", "CountryAbb")])
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(reshape2))
ccodes <- unique(df[c("ccode", "CountryAbb")])
countrycodes <- unique(df[c("ccode", "CountryAbb")])
countrycodes <- unique(c("ccode", "CountryAbb"))
countrycodes <- ideals[,2:3]
countrycodes <- unique(df[c("ccode", "CountryAbb")])
unique(df[c("ccode", "CountryAbb")])
countrycodes <- unique(df[,c("ccode", "CountryAbb")])
countrycodes <- unique(countrycodes[c("ccode", "CountryAbb")])
View(countrycodes)
countrycodes <- ideals[,2:3]
countrycodes <- unique(countrycodes[c("ccode", "CountryAbb")])
View(votedesc)
View(descriptionsnew)
View(idealpoints)
View(votedesc)
View(rawvotes)
View(countrycodes)
View(ideals)
View(votedesc)
View(ideals)
View(COW.Country.Codes)
View(rawvotes)
View(countrycodes)
View(ideals)
View(votedesc)
str(votedesc)
votedesc <- as.Date(votedesc$date, "%m/%d/%y")
str(votedesc)
votedesc <- tbl_df(descriptionsnew)
#insert proper col names for ideals
colnames(ideals) = ideals[1,]
ideals = ideals[-1,]
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(reshape2))
votedesc$date <- as.Date(votedesc$date, "%m/%d/%y")
as.Date(votedesc$date, "%m/%d/%y")
votedesc$date <- as.Date(votedesc$date, "%m/%d/%y")
rawvotes <- tbl_df(RawVotingdata)
countrycodes <- tbl_df(COW.Country.Codes)
ideals <- tbl_df(Idealpoints)
votedesc <- tbl_df(descriptionsnew)
#insert proper col names for ideals
colnames(ideals) = ideals[1,]
ideals = ideals[-1,]
#format Dates as dates
votedesc$date <- as.Date(votedesc$date, "%m/%d/%y")
str(votedesc)
View(descriptionsnew)
votedesc <- tbl_df(descriptionsnew)
votedesc$date <- as.Date(votedesc$date, "%m/%d/%yyyy")
votedesc <- tbl_df(descriptionsnew)
votedesc$date <- as.Date(votedesc$date, "%m/%d/%y")
votedesc <- tbl_df(descriptionsnew)
votedesc$date <- as.Date(votedesc$date, "%m/%d/%Y")
votedesc <- tbl_df(descriptionsnew)
votedesc$date <- as.Date(votedesc$date, "%m/%d/%Y")
votedesc %>% n_distinct() %>% session
votedesc %>% n_distinct(session)
votedesc %>% session %>%  n_distinct()
votedesc %>% distinct(session)
rawvotes %>% group_by(ccode) %>% summarise(total.count=n())
rawvotes %>% group_by(ccode, vote) %>% summarise(count("9"))
rawvotes %>% group_by(ccode, vote) %>% summarise(count(,"9"))
count(rawvotes, c("9"))
rawvotes %>% group_by(ccode, vote) %>% summarise(count(rawvotes,"9"))
rawvotes %>% group_by(ccode, vote) %>% count(rawvotes,"9")
rawvotes %>% group_by(ccode, vote) %>% count("9")
rawvotes %>% group_by(ccode, vote) %>% count()
View(COW.Country.Codes)
View(countrycodes)
write.csv(countrycodes, file = "output.csv")
Country.Info.Master <- read.csv("~/United Nation Data/Country.Info.Master.csv", stringsAsFactors=FALSE)
View(Country.Info.Master)
View(Country.Info.Master)
rawvotes <- merge(x = rawvotes, y = Country.Info.Master[,c("statenme", "Macro.Region", "Sub.Region")], by = "ccode", all.x = TRUE)
Country.Info.Master <- read.csv("~/United Nation Data/Country.Info.Master.csv", stringsAsFactors=FALSE)
View(Country.Info.Master)
Idealpoints <- read.delim("~/United Nation Data/Idealpoints.tab", header=FALSE, stringsAsFactors=FALSE)
View(Idealpoints)
descriptionsnew <- read.csv("~/United Nation Data/descriptionsnew.csv", stringsAsFactors=FALSE)
View(descriptionsnew)
RawVotingdata <- read.delim("~/United Nation Data/RawVotingdata.tab", stringsAsFactors=FALSE)
View(RawVotingdata)
COW.Country.Codes <- read.csv("~/United Nation Data/COW Country Codes.csv", stringsAsFactors=FALSE)
View(COW.Country.Codes)
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(reshape2))
# Data Tidying Below
#----------------------------------------------------------------------------------------------------------------
#Import datasets as tables
rawvotes <- tbl_df(RawVotingdata)
countrycodes <- tbl_df(COW.Country.Codes)
ideals <- tbl_df(Idealpoints)
votedesc <- tbl_df(descriptionsnew)
#insert proper col names for ideals
colnames(ideals) = ideals[1,]
ideals = ideals[-1,]
#format Dates as dates
votedesc$date <- as.Date(votedesc$date, "%m/%d/%Y")
#insert the country name and country's region (macro/sub) into raw votes
country.master <- tbl_df(Country.Info.Master)
View(country.master)
votedesc$date <- as.Date(votedesc$date, "%m/%d/%Y")
#insert the country name and country's region (macro/sub) into raw votes
rawvotes <- merge(x = rawvotes, y = country.master[,c("statenme", "Macro.Region", "Sub.Region")], by = "ccode", all.x = TRUE)
write.csv(country.master, file = "output.csv")
View(rawvotes)
meh <- merge(x = rawvotes, y = country.master[,c("statenme", "Macro.Region", "Sub.Region")], by = "ccode", all.x = TRUE)
meh <- merge(x = rawvotes, y = country.master[,c("statenme", "Macro.Region", "Sub.Region")], by.x = "ccode", all.x = TRUE)
meh <- merge(x = rawvotes, y = country.master[,c("statenme", "Macro.Region", "Sub.Region")], by = "ccode", all.x = TRUE)
str(rawvotes)
str(country.master)
meh <- merge(x = rawvotes, y = country.master, by = "ccode", all.x = TRUE)
View(meh)
mehee <- merge(x = rawvotes, y = country.master[,c("statenme", "Macro.Region", "Sub.Region")], by = "ccode", all.x = TRUE)
mehee <- merge(x = rawvotes, y = country.master, by = "ccode", all.x = TRUE)
Country.Info.Master <- read.csv("~/United Nation Data/Core Data/Country.Info.Master.csv", stringsAsFactors=FALSE)
View(Country.Info.Master)
descriptionsnew <- read.csv("~/United Nation Data/Core Data/descriptionsnew.csv", stringsAsFactors=FALSE)
View(descriptionsnew)
Idealpoints <- read.delim("~/United Nation Data/Core Data/Idealpoints.tab", header=FALSE, stringsAsFactors=FALSE)
View(Idealpoints)
RawVotingdata <- read.delim("~/United Nation Data/Core Data/RawVotingdata.tab", stringsAsFactors=FALSE)
View(RawVotingdata)
COW.Country.Codes <- read.csv("~/United Nation Data/Core Data/COW Country Codes.csv", stringsAsFactors=FALSE)
View(COW.Country.Codes)
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(reshape2))
# Data Tidying Below
#----------------------------------------------------------------------------------------------------------------
#Import datasets as tables
rawvotes <- tbl_df(RawVotingdata)
countrycodes <- tbl_df(COW.Country.Codes)
ideals <- tbl_df(Idealpoints)
votedesc <- tbl_df(descriptionsnew)
country.master <- tbl_df(Country.Info.Master)
#insert proper col names for ideals
colnames(ideals) = ideals[1,]
ideals = ideals[-1,]
#format Dates as dates
votedesc$date <- as.Date(votedesc$date, "%m/%d/%Y")
#merge rawvotes tbl and country.master data, then drop unnecessary col
raw.votes <- merge(x = rawvotes, y = country.master, by = "ccode", all.x = TRUE)
raw.votes <- rawvotes
#make a lookup table for country codes & remove duplicates based on ideals info
countrycodes <- ideals[,2:3]
countrycodes <- unique(countrycodes[c("ccode", "CountryAbb")])
View(countrycodes)
View(raw.votes)
raw.votes <- merge(x = rawvotes, y = country.master, by = "ccode", all.x = TRUE)
View(raw.votes)
install.packages("ggplot2")
suppressMessages(library(ggplot2))
ggplot(raw.votes, aes(x = session, y = vote)) +
geom_point() +
geom_smooth()
ggplot(raw.votes, aes(x = session, y = vote, col = factor(Macro.Region))) +
geom_jitter()
subset(raw.votes, stateabb %in% c("USA"))
temp <- subset(raw.votes, stateabb %in% c("USA"))
temp <- subset(raw.votes, stateabb %in% c("USA"))
View(temp)
ggplot(subset(raw.votes, stateabb %in% c("USA")), aes(x = session, y = vote)) +
geom_jitter()
View(votedesc)
View(raw.votes)
View(countrycodes)
ggplot(raw.votes, aes(x = session, y = vote, col = factor(Macro.Region))) +
geom_jitter()
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(reshape2))
suppressMessages(library(ggplot2))
# Data Tidying Below
#----------------------------------------------------------------------------------------------------------------
raw.votes <- rawvotes[,-(11:17)]
raw.votes <- rawvotes[,-c(11:17)]
raw.votes <- rawvotes[,c(1:10)]
raw.votes <- raw.votes[,c(1:10)]
ggplot(raw.votes, aes(x = session, y = vote, col = factor(Macro.Region))) +
geom_jitter()
sum(raw.votes$ccode != "")
sum(raw.votes$ccode = "")
sum(raw.votes$ccode = " ")
sum(raw.votes$ccode == " ")
sum(raw.votes$ccode == "")
sum(raw.votes$ccode == NA)
sum(raw.votes$ccode == N/A)
sum(raw.votes$ccode == "N/A")
sum(raw.votes$ccode == "NA")
sum(raw.votes$ccode != "NA")
sum(raw.votes$ccode = 2)
sum(raw.votes$ccode = "2")
sum(raw.votes$ccode == "2")
str(raw.votes)
raw.votes <- transform (raw.votes,
ccode = as.character(ccode),
ID = as.character(ID)
)
str(raw.votes)
sum(raw.votes$ccode == "2")
rowSums(is.na(raw.votes[,1]))
raw.votes %>% select(ccode) %>% unqiue()
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(reshape2))
suppressMessages(library(ggplot2))
raw.votes %>% select(ccode) %>% unqiue()
raw.votes %>% select(ccode) %>% unique()
sum(is.na(raw.votes$ccode))
raw.votes %>% select(vote) %>% unique()
count(votes, 'ccode')
count(raw.votes, 'ccode')
class(raw.votes)
count(raw.votes, 'vote')
count(raw.votes, 'stateabb')
factor(raw.votes$ccode)
count(raw.votes, 'stateabb')
str(raw.votes)
raw.votes <- transform (raw.votes,
ccode = as.factor(ccode),
ID = as.factor(ID),
rcid = as.factor(rcid),
vote = as.factor(vote),
state.abb = as.factor(state.abb),
statenme = as.factor(statenme),
region.code = as.factor(region.code),
macro.region = as.factor(macro.region),
sub.region = as.factor(sub.region)
)
raw.votes <- transform (raw.votes,
ccode = as.factor(ccode),
ID = as.factor(ID),
rcid = as.factor(rcid),
vote = as.factor(vote),
state.abb = as.factor(state.abb),
statenme = as.factor(statenme),
region.code = as.factor(Region.Code),
macro.region = as.factor(macro.region),
sub.region = as.factor(sub.region)
)
raw.votes <- transform (raw.votes,
ccode = as.factor(ccode),
ID = as.factor(ID),
rcid = as.factor(rcid),
vote = as.factor(vote),
state.abb = as.factor(state.abb),
statenme = as.factor(statenme),
region.code = as.factor(Region.Code),
macro.region = as.factor(Macro.Region),
sub.region = as.factor(sub.region)
)
raw.votes <- transform (raw.votes,
ccode = as.factor(ccode),
ID = as.factor(ID),
rcid = as.factor(rcid),
vote = as.factor(vote),
state.abb = as.factor(state.abb),
statenme = as.factor(statenme),
region.code = as.factor(Region.Code),
macro.region = as.factor(Macro.Region),
sub.region = as.factor(Sub.Region)
)
raw.votes %>% select(ccode) %>% unique()
raw.votes %>% select(ccode) %>% count() %>% unique()
ccode = as.factor(ccode),
ccode = as.factor(ccode)
RawVotingdata <- read.delim("~/United Nation Data/Core Data/RawVotingdata.tab")
View(RawVotingdata)
descriptionsnew <- read.csv("~/United Nation Data/Core Data/descriptionsnew.csv")
View(descriptionsnew)
Country.Info.Master <- read.csv("~/United Nation Data/Core Data/Country.Info.Master.csv")
View(Country.Info.Master)
str(Country.Info.Master)
Idealpoints <- read.delim("~/United Nation Data/Core Data/Idealpoints.tab", header=FALSE)
View(Idealpoints)
COW.Country.Codes <- read.csv("~/United Nation Data/Core Data/COW Country Codes.csv")
View(COW.Country.Codes)
str(Country.Info.Master)
countryinfo <- tbl_df(Country.Info.Master)
View(countryinfo)
countryinfo <- countryinfo[,1:7]
voteinfo <- tbl_df(descriptionsnew)
View(voteinfo)
rawvotes <- tbl_df(RawVotingdata)
View(rawvotes)
ideals <- tbl_df(Idealpoints)
View(ideals)
ideals <- ideals[,1:21]
ideals <- tbl_df(Idealpoints)
ideals <- ideals[,c(1:8, 16:21)]
View(Idealpoints)
countrycodes <- tbl_df(COW.Country.Codes)
View(countrycodes)
countrycodes <- countrycodes[, 1:3]
View(COW.Country.Codes)
#insert proper col names for ideals
colnames(ideals) = ideals[1,]
ideals = ideals[-1,]
ideals <- tbl_df(Idealpoints)
ideals <- ideals[,c(1:8, 16:21)]
View(ideals)
colnames(ideals) = ideals[1,]
ideals <- tbl_df(Idealpoints)
ideals <- ideals[,c(1:8, 16:21)]
colnames(ideals) = ideals[1,]
colnames(ideals) = ideals[1,]
ideals <- tbl_df(Idealpoints)
ideals <- ideals[,c(1:8, 16:21)]
colnames(ideals) = ideals[1,]
(Idealpoints)
ideals <- tbl_df(Idealpoints)
colnames(ideals) = ideals[1,]
ideals = ideals[-1,]
ideals <- tbl_df(Idealpoints)
colnames(ideals) = ideals[2,]
colnames(ideals) = ideals[1,]
Idealpoints <- read.delim("~/United Nation Data/Core Data/Idealpoints.tab", header=FALSE)
View(Idealpoints)
ideals <- tbl_df(Idealpoints)
colnames(ideals) = ideals[1,]
Idealpoints <- read.delim("~/United Nation Data/Core Data/Idealpoints.tab", header=FALSE)
View(Idealpoints)
colnames(Idealpoints) = Idealpoints[1,]
View(Idealpoints)
Idealpoints <- read.delim("~/United Nation Data/Core Data/Idealpoints.tab")
View(Idealpoints)
Country.Info.Master <- read.csv("~/United Nation Data/Core Data/Country.Info.Master.csv")
View(Country.Info.Master)
COW.Country.Codes <- read.csv("~/United Nation Data/Core Data/COW Country Codes.csv")
View(COW.Country.Codes)
descriptionsnew <- read.csv("~/United Nation Data/Core Data/descriptionsnew.csv")
View(descriptionsnew)
Idealpoints <- read.delim("~/United Nation Data/Core Data/Idealpoints.tab")
View(Idealpoints)
RawVotingdata <- read.delim("~/United Nation Data/Core Data/RawVotingdata.tab")
View(RawVotingdata)
str(Country.Info.Master)
countryinfo <- transform(countrycodes, as.factor(ccode))
countryinfo <- tbl_df(Country.Info.Master)
str(Country.Info.Master)
countryinfo <- transform(countryinfo, as.factor(ccode))
str(countryinfo)
countryinfo <- transform(countryinfo, ccode = as.factor(ccode))
str(countryinfo)
str(descriptionsnew)
voteinfo <- tbl_df(descriptionsnew)
str(voteinfo)
View(voteinfo)
voteinfo$date <- as.Date(voteinfo$date, "%m/%d/%Y")
str(voteinfo)
voteinfo <- transform(voteinfo,
short = as.character(short),
descr = as.character(descr))
str(voteinfo)
rawvotes <- tbl_df(RawVotingdata)
str(rawvotes)
rawvotes <- transform(rawvotes,
ccode = as.factor(ccode),
vote = as.factor(vote),
session = as.factor(session))
str(rawvotes)
ideals <- tbl_df(Idealpoints)
ideals <- ideals[,c(1:8, 16:21)]
str(ideals)
ideals <- as.Date(ideals$Year, "%Y")
ideals <- as.character(ideals$Year)
ideals <- as.Date(ideals$Year, "%Y")
ideals <- transform(ideals, Year = as.character(Year))
ideals <- tbl_df(Idealpoints)
ideals <- ideals[,c(1:8, 16:21)]
ideals <- transform(ideals, Year = as.character(Year))
str(ideals)
ideals$Year <- as.Date(ideals$Year, "%Y")
str(ideals)
View(ideals)
ideals$Year <- strftime(ideals$Year, "%Y")
ideals <- tbl_df(Idealpoints)
ideals <- ideals[,c(1:8, 16:21)]
ideals <- transform(ideals, Year = as.character(Year))
ideals$Year <- as.Date(ideals$Year,"%Y")
ideals$Year <- strftime(ideals$Year, "%Y")
ideals <- transform(ideals,
ccode = as.factor(ccode),
session = as.factor(session))
str(ideals)
ideals <- transform(ideals,
ccode = as.factor(ccode),
session = as.factor(session),
Year = as.factor(Year))
str(ideals)
ideals <- tbl_df(Idealpoints)
str(ideals)
str(countrycodes)
countrycodes <- tbl_df(COW.Country.Codes)
countrycodes <- countrycodes[, 1:3]
str(countrycodes)
countrycodes$ccode <- as.factor(ccode)
countrycodes$ccode <- as.factor(countrycodes$ccode)
str(countrycodes)
str(ideals)
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(reshape2))
suppressMessages(library(ggplot2))
# Importing the Relevant Data - import all with strings as factors
#----------------------------------------------------------------------------------------------------------------
Country.Info.Master <- read.csv("~/United Nation Data/Core Data/Country.Info.Master.csv")
View(Country.Info.Master)
descriptionsnew <- read.csv("~/United Nation Data/Core Data/descriptionsnew.csv")
View(descriptionsnew)
RawVotingdata <- read.delim("~/United Nation Data/Core Data/RawVotingdata.tab")
View(RawVotingdata)
Idealpoints <- read.delim("~/United Nation Data/Core Data/Idealpoints.tab")
View(Idealpoints)
COW.Country.Codes <- read.csv("~/United Nation Data/Core Data/COW Country Codes.csv")
View(COW.Country.Codes)
countryinfo <- tbl_df(Country.Info.Master)
voteinfo <- tbl_df(descriptionsnew)
rawvotes <- tbl_df(RawVotingdata)
ideals <- tbl_df(Idealpoints)
countrycodes <- tbl_df(COW.Country.Codes)
#keep only needed columns
countryinfo <- countryinfo[,1:7]
ideals <- ideals[,c(1:8, 16:21)]
countrycodes <- countrycodes[, 1:3]
#properly format data
countryinfo <- transform(countryinfo, ccode = as.factor(ccode))
voteinfo$date <- as.Date(voteinfo$date, "%m/%d/%Y")
voteinfo <- transform(voteinfo,
short = as.character(short),
descr = as.character(descr))
rawvotes <- transform(rawvotes,
ccode = as.factor(ccode),
vote = as.factor(vote),
session = as.factor(session))
ideals <- transform(ideals,
ccode = as.factor(ccode),
session = as.factor(session)
)
countrycodes$ccode <- as.factor(countrycodes$ccode)
View(countryinfo)
View(voteinfo)
View(rawvotes)
View(ideals)
View(countrycodes)
countryinfo %>% filter(state.abb == "USA")
countryinfo %>% filter(stateabb == "USA")
countryinfo %>% filter(stateabb == "")
countryinfo %>% filter(stateabb == "USA" | "CUB")
countryinfo %>% subset(countryinfo, stateabb == "USA")
countryinfo %>% subset( stateabb == "USA")
countryinfo %>% subset( stateabb == "USA" | == "CUB")
countryinfo %>% subset( stateabb == "USA" | "CUB")
countryinfo %>% subset( stateabb == "USA" | stateabb == "CUB")
countryinfo %>% subset( is.na(state.abb))
countryinfo %>% subset( is.na(state.abb) | stateabb == "USA")
countryinfo %>% subset( is.na(stateabb) | stateabb == "USA")
countryinfo %>% subset( is.na(stateabb))
blanks <- countryinfo[rowSums(is.na(countryinfo)) > 0, ]
blanks <- countrycodes[rowSums(is.na(countrycodes)) > 0, ]
View(blanks)
blanks <- voteinfo[rowSums(is.na(voteinfo)) > 0, ]
View(blanks)
blanks <- countryinfo[rowSums(is.na(countryinfo)) > 0, ]
blanks <- voteinfo[rowSums(is.na(voteinfo)) > 0, ]
blanks <- rawvotes[rowSums(is.na(rawvotes)) > 0, ]
blanks <- ideals[rowSums(is.na(ideals)) > 0, ]
blanks <- countrycodes[rowSums(is.na(countrycodes)) > 0, ]
blanks <- voteinfo[rowSums(is.na(voteinfo)) > 0, ]  #FAIL
View(blanks)
View(voteinfo)
View(descriptionsnew)
blanks <- voteinfo[rowSums(is.na(voteinfo)) > 0, ]  #FAIL
blanks <- rawvotes[rowSums(is.na(rawvotes)) > 0, ]  #FAIL,
blanks <- ideals[rowSums(is.na(ideals)) > 0, ]  #FAIL,
blanks <- voteinfo[rowSums(is.na(voteinfo)) > 0, ]  #FAIL, 2542 (~47%)
voteinfo <- voteinfo[, c(1:8, 11:18)]
View(descriptionsnew)
str(voteinfo)
blanks <- voteinfo[rowSums(is.na(voteinfo)) > 0, ]  #FAIL, 2542 (~47%)
blanks <- ideals[rowSums(is.na(ideals)) > 0, ]  #FAIL, 2094 (~22%)
temp <- subset(ideals, ideals[,9:14])
temp <- ideals[,9:14]
View(temp)
blanks <- temp[rowSums(is.na(temp)) > 0, ]
blanks <- temp[rowSums(is.na(temp)) > 0, ]
ideals <- ideals[, 1:8]
blanks <- ideals[rowSums(is.na(ideals)) > 0, ]
blanks <- voteinfo[rowSums(is.na(voteinfo)) > 0, ]  #PASS
